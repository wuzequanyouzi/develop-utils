{"version":3,"file":"js/564.04cf913a.js","mappings":"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","sources":["webpack://docs-site/./src/article/list/03.md","webpack://docs-site/./src/article/list/03.md?3663"],"sourcesContent":["<template><section><blockquote>\n<p>puerts是游戏引擎下的TypeScript编程解决方案</p>\n<ul>\n<li>提供了一个JavaScript运行时</li>\n<li>提供通过TypeScript访问宿主引擎的能力（JavaScript层面的绑定以及TypeScript声明生成）</li>\n</ul>\n</blockquote>\n<p><a href=\"https://github.com/Tencent/puerts\">Puerts</a></p>\n<p>最近在学U3D，偶然发现腾讯开源了个插件，支持用TS写U3D脚本，666。\n于是看了下github说明，想看看怎么用，结果发现好像没什么指引教程。</p>\n<p>官方给了Demo<a href=\"https://github.com/chexiongsheng/puerts_unity_demo#more-example--%E6%9B%B4%E5%A4%9A%E7%9A%84%E7%A4%BA%E4%BE%8B%E6%88%96%E8%80%85%E6%95%99%E7%A8%8B\">puerts_unity_demo</a>,可以直接用官方的Demo来初始化项目；如果是从unity hub 直接创建的化，官方文档好像没有这部分的指引；于是我结合了<a href=\"https://www.bilibili.com/video/BV13v411g7sV\">Unity TypeScript 脚本解决方案 Puerts 实例解析快速上手</a>这UP主的视频，终于是跑成功了。 接下来就记录一下吧~</p>\n<h2>第一步：<a href=\"https://github.com/Tencent/puerts/releases\">Puerts/releases</a></h2>\n<p>下载发行版的puerts unity版 PuerTS_V8</p>\n<p><img src=\"https://pic.imgdb.cn/item/6524c5d7c458853aef8f447f.jpg\" alt=\"image.png\">\n然后解压</p>\n<p><img src=\"https://pic.imgdb.cn/item/6524c5e0c458853aef8f472e.jpg\" alt=\"image.png\"></p>\n<h2>第二步：创建一个Unity工程</h2>\n<p><img src=\"https://pic.imgdb.cn/item/6524c5e0c458853aef8f4717.jpg\" alt=\"image.png\">\n将刚才解压的Puerts文件夹拉到工程的Assets目录下</p>\n<p><img src=\"https://pic.imgdb.cn/item/6524c5d7c458853aef8f4497.jpg\" alt=\"image.png\">\nPS： 有报warning不用管，完成后面的操作，就不会报了。</p>\n<h2>第三步：生成TS声明文件</h2>\n<p>生成TS声明文件，需要配置Puerts，如果没有配置，生成出来的TS声明文件基本上没有类型提示的。\n官方已经提供了一份比较全的Puerts配置文件</p>\n<p>首先，将官方提供的<a href=\"https://github.com/chexiongsheng/puerts_unity_demo/blob/master/projects/1_Start_Template/Assets/Samples/Editor/01_WrapperGenerate/PuertsConfig.cs\">PuertsConfig.cs</a>文件下载下来；</p>\n<p>然后，在工程的Assets目录下创建<code v-pre>Editor</code>文件夹，将下载的<code v-pre>PuertsConfig.cs</code>文件复制到<code v-pre>Editor</code>目录下。</p>\n<p>再然后，点击Unity工具栏的<code v-pre>PuerTS</code>选项，选择<code v-pre>Generate Code</code></p>\n<p><img src=\"https://pic.imgdb.cn/item/6524c5e0c458853aef8f4700.jpg\" alt=\"image.png\"></p>\n<p>等待生成完成，Console的warning就会消失，工程的Assets目录下会生成Gen文件夹，里面存放了UnityC#桥接到TS的各种类/方法/类型声明。</p>\n<h2>第四步：创建TS工程</h2>\n<p>在Assets目录下创建<code v-pre>TsProject</code>(名字可以任取)；进入<code v-pre>TsProject</code>,在命令行中执行<code v-pre>npm init -y</code>先初始化初始化package.json(要安装node.js，前端开发应该不陌生);</p>\n<p>然后再执行<code v-pre>npm i typescript -D</code>,安装TS依赖</p>\n<p>在<code v-pre>TsProject</code>目录下创建<code v-pre>tsconfig.json</code>文件</p>\n<pre v-pre><code v-pre class=\"language-json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;compilerOptions&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;target&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;esnext&quot;</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;module&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;commonjs&quot;</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;sourceMap&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span class=\"hljs-keyword\">true</span></span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;noImplicitAny&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span class=\"hljs-keyword\">true</span></span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;typeRoots&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n      <span class=\"hljs-string\">&quot;../Puerts/Typing&quot;</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-string\">&quot;../Gen/Typing&quot;</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-string\">&quot;./node_modules/@types&quot;</span>\n    <span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;outDir&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;output&quot;</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<p>再然后：下载官方Demo的<a href=\"https://github.com/chexiongsheng/puerts_unity_demo/blob/master/projects/0_Basic_Demo/TsProj/copyJsFile.js\">copyJsFile.js</a>到<code v-pre>TsProject</code>目录下。</p>\n<p>在<code v-pre>package.json</code>文件夹中，编写执行脚本命令</p>\n<pre v-pre><code v-pre class=\"language-json\"><span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;scripts&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n        <span class=\"hljs-attr\">&quot;build&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;tsc -p tsconfig.json&quot;</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-attr\">&quot;postbuild&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;node copyJsFile.js output ../Resources&quot;</span>\n    <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<h2>第五步： 编写TS脚本和CS中加载TS文件</h2>\n<p>在<code v-pre>TsProject</code>目录下创建一个TS文件</p>\n<pre v-pre><code v-pre class=\"language-ts\"><span class=\"hljs-comment\">// Player.ts</span>\n<span class=\"hljs-keyword\">import</span> {<span class=\"hljs-title class_\">UnityEngine</span>, <span class=\"hljs-title class_\">System</span>} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;csharp&quot;</span>;\n<span class=\"hljs-title class_\">UnityEngine</span>.<span class=\"hljs-property\">Debug</span>.<span class=\"hljs-title class_\">Log</span>(<span class=\"hljs-string\">&quot;hello world ts&quot;</span>);\n</code></pre>\n<p>然后在<code v-pre>Assets</code>目录下创建一个<code v-pre>Resources</code>文件夹，用于存放CS加载的TS文本文件。</p>\n<p>然后在TsProject路径下执行 <code v-pre>npm run build</code></p>\n<p><img src=\"https://pic.imgdb.cn/item/6524c5d7c458853aef8f4463.jpg\" alt=\"image.png\"></p>\n<p>编译完成之后，<code v-pre>Resources</code>目录下会出现对应的文本文件\n<img src=\"https://pic.imgdb.cn/item/6524c5e0c458853aef8f46df.jpg\" alt=\"image.png\"></p>\n<p>再然后，在<code v-pre>Assets</code>目录下创建一个CS脚本文件，我这里是将CS放在了<code v-pre>Scripts</code>目录下：</p>\n<p><img src=\"https://pic.imgdb.cn/item/6524c5e6c458853aef8f4938.jpg\" alt=\"image.png\">\n在CS中引入Puerts库， 声明jsEnv变量，实例化一个JsEnv，并引入生成的Player.js.txt，Eval会执行该txt的代码。\n<img src=\"https://pic.imgdb.cn/item/6524c5d7c458853aef8f445c.jpg\" alt=\"image.png\"></p>\n<p>然后在Unity将CS拖到对应的Object上， playgame，</p>\n<p><img src=\"https://pic.imgdb.cn/item/6524c5e0c458853aef8f46ea.jpg\" alt=\"image.png\"></p>\n<p>这样就可以愉快地在Unity使用TS啦~</p>\n<blockquote>\n<p>PS： 目前发现个小问题，在TS中，获取游戏物体的component，当我获取物体的刚体组件，返回的值类型是Component而非Rigidbody，这会导致返回的值无法调用Rigidbody的属性/方法。只需要对返回的值指定Rigidbody类型即可。（不知道是我不会用，还是确实是index.d.ts定义缺失）</p>\n</blockquote>\n<p><img src=\"https://pic.imgdb.cn/item/6524c5d7c458853aef8f4450.jpg\" alt=\"image.png\"></p>\n<p>菜鸟，请多指教，如有不对，请在评论区指出，谢谢~</p>\n</section></template><script>export default {components:{}}</script>","import { render } from \"./03.md?vue&type=template&id=927dd4bc\"\nimport script from \"./03.md?vue&type=script&lang=js\"\nexport * from \"./03.md?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createStaticVNode","_createElementVNode","class","_createTextVNode","href","_hoisted_1","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_createElementBlock","_hoisted_42","components","__exports__","render"],"sourceRoot":""}