"use strict";(self["webpackChunkdocs_site"]=self["webpackChunkdocs_site"]||[]).push([[942],{3205:function(s,a,l){l.r(a),l.d(a,{default:function(){return R}});var n=l(1337),e=l.p+"img/luopan.e3a1473d.gif";const t=(0,n.uE)('<h2>前言</h2><p>之前在搞智慧城市，项目的3D地图页面是第三方提供的，产品经理老过来提3D地图的需求，搞得我三天两头就对接第三方，第三方以这没办法做、那性能不行等理由搪塞（还没给钱，不做）。没办法自己着手搞起了3D地图，使用了<code>CesiumJS</code>地图框架开发。<a href="https://juejin.cn/post/6948613248941817893">Cesium加载大量Label实体时卡顿的一种解决方法</a> 之前这篇文章就是在做3D地图遇到的算比较大的问题的一个解决方案。</p><p>最近产品经理不知道去哪里又看到3D地图有罗盘可以实现视角移动，就抄了下来，问我能不能实现。哈哈，当时直接回他说：项目太急，没法实现。WDNMD(唯独你没懂)</p><p>唉，说归说，做还是TM得做，谁叫我是酷毙（苦逼）的开发呢？</p><h2>效果</h2><p><img src="'+e+'" alt="ezgif-6-c6883e81ad2b.gif"></p><h2>导航罗盘功能</h2><p><img src="https://pic.imgdb.cn/item/6523b3cfc458853aef4d92b8.webp" alt="image.png"></p><p>在实现导航罗盘之前，必须先搞明白怎样操控罗盘，场景相机对应的要怎么移动。</p><h3>罗盘区域的操作</h3>',10),c=(0,n._)("pre",null,[(0,n._)("code",{"v-pre":""},"这里先解决一个问题： 相机移动是相机位置移动还是，相机视角移动？\n\n按照展示某个物体的情况，应该是环物体360°拍摄\n\n所以我们这个罗盘控制相机就确定为 以屏幕中心的所在的位置为点，绕该点进行移动\n")],-1),p=(0,n._)("p",null,"以罗盘区域中心点作为原点",-1),r=(0,n._)("ol",null,[(0,n._)("li",null,"鼠标向左右移动， 绕相机视角区域中心点左右移动"),(0,n._)("li",null,"鼠标向上下移动， 绕相机视角区域中心点上下移动")],-1),_=(0,n._)("h3",null,"功能的实现",-1),h=(0,n._)("h4",null,"鼠标按下事件",-1),k=(0,n._)("p",null,"鼠标按下时，需要记录相机视角区域的中心位置，记录时间（为了后面相机移动时，画面平滑）",-1),o=(0,n._)("pre",null,[(0,n._)("code",{"v-pre":"",class:"language-js"},[(0,n.Uk)("      "),(0,n._)("span",{class:"hljs-keyword"},"let"),(0,n.Uk)(" result = "),(0,n._)("span",{class:"hljs-keyword"},"new"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-title class_"},"Cartesian3"),(0,n.Uk)("();\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" { camera, scene } = "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"$refs"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"map"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"viewer"),(0,n.Uk)(";\n      "),(0,n._)("span",{class:"hljs-keyword"},"let"),(0,n.Uk)(" dom = e."),(0,n._)("span",{class:"hljs-property"},"target"),(0,n.Uk)(";\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" rayScratch = "),(0,n._)("span",{class:"hljs-keyword"},"new"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-title class_"},"Ray"),(0,n.Uk)("();\n      rayScratch."),(0,n._)("span",{class:"hljs-property"},"origin"),(0,n.Uk)(" = camera."),(0,n._)("span",{class:"hljs-property"},"positionWC"),(0,n.Uk)(";\n      rayScratch."),(0,n._)("span",{class:"hljs-property"},"direction"),(0,n.Uk)(" = camera."),(0,n._)("span",{class:"hljs-property"},"directionWC"),(0,n.Uk)(";\n      result = scene."),(0,n._)("span",{class:"hljs-property"},"globe"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"pick"),(0,n.Uk)("(rayScratch, scene, result);\n      result = camera."),(0,n._)("span",{class:"hljs-title function_"},"worldToCameraCoordinatesPoint"),(0,n.Uk)("(result, result);\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" newTransformScratch = "),(0,n._)("span",{class:"hljs-keyword"},"new"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-title class_"},"Matrix4"),(0,n.Uk)("();\n      \n"),(0,n._)("span",{class:"hljs-comment"},"/* Transforms.eastNorthUpToFixedFrame\n计算一个4x4变换矩阵，该矩阵从一个以提供的原点为中心的东北向上轴的参考坐标系到提供的椭球体\n的固定参考坐标系。局部轴定义为：\nx轴指向本地的东方向。\ny轴指向本地北向。\nz轴指向穿过该位置的椭球面法线方向。\n*/"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-comment"},"// 怎么理解呢？ "),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-comment"},"// 简单的讲，应该是：当用这个4x4矩阵设置相机的位置，那么相机的旋转是以4x4矩阵提供的原点作为旋转中心进行旋转，"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-comment"},"// 当这个4x4矩阵为单位矩阵时，相机的旋转是位置的平移"),(0,n.Uk)("\n      "),(0,n._)("span",{class:"hljs-keyword"},"let"),(0,n.Uk)(" frame = "),(0,n._)("span",{class:"hljs-title class_"},"Transforms"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"eastNorthUpToFixedFrame"),(0,n.Uk)("(\n        result,\n        scene."),(0,n._)("span",{class:"hljs-property"},"globe"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"ellipsoid"),(0,n.Uk)(",\n        newTransformScratch\n      );\n      "),(0,n._)("span",{class:"hljs-keyword"},"let"),(0,n.Uk)(" time = "),(0,n._)("span",{class:"hljs-title function_"},"getTimestamp"),(0,n.Uk)("();\n      "),(0,n._)("span",{class:"hljs-variable language_"},"document"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"addEventListener"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-string"},"'mousemove'"),(0,n.Uk)(", mousemoveHandler);\n      "),(0,n._)("span",{class:"hljs-variable language_"},"document"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"addEventListener"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-string"},"'mouseup'"),(0,n.Uk)(", mouseupHandler);\n      "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"$refs"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"map"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"viewer"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"clock"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"onTick"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"addEventListener"),(0,n.Uk)("(\n        orbitTickFunction\n      );\n")])],-1),i=(0,n.uE)('<h4>鼠标移动事件</h4><p>鼠标移动时，计算鼠标所在位置相对于罗盘原点的坐标值。</p><ol><li><p>计算罗盘元素的中心点相对于罗盘元素区域的坐标 <code>x0 = (right - left) / 2</code> <code>y0 = (bottom - top) / 2</code><img src="https://pic.imgdb.cn/item/6523b3cfc458853aef4d9281.webp" alt="image.png"></p></li><li><p>鼠标位置相对于罗盘元素的坐标<code>Tx = e.clientX - left</code> <code>Ty = e.clientY - top</code><img src="https://pic.imgdb.cn/item/6523b3cfc458853aef4d9273.webp" alt="image.png"></p></li><li><p>有了相对位置和原点坐标，我们就可以构建一个二维向量了（为了计算夹角），使用<code>CesiumJS</code>的<code>Cartesian2.subtract</code>计算出二维向量</p></li></ol>',3),U=(0,n._)("pre",null,[(0,n._)("code",{"v-pre":"",class:"language-js"},[(0,n._)("span",{class:"hljs-comment"},"// dom 是罗盘dom"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-keyword"},"let"),(0,n.Uk)(" compassR = dom."),(0,n._)("span",{class:"hljs-title function_"},"getBoundingClientRect"),(0,n.Uk)("();\n\n"),(0,n._)("span",{class:"hljs-comment"},"// 点击元素的中心点xy"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-keyword"},"let"),(0,n.Uk)(" center = "),(0,n._)("span",{class:"hljs-keyword"},"new"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-title class_"},"Cesium"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title class_"},"Cartesian2"),(0,n.Uk)("(\n(compassR."),(0,n._)("span",{class:"hljs-property"},"right"),(0,n.Uk)(" - "),(0,n._)("span",{class:"hljs-title class_"},"Cesium"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"compassR"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"left"),(0,n.Uk)(") / "),(0,n._)("span",{class:"hljs-number"},"2"),(0,n.Uk)(",\n(compassR."),(0,n._)("span",{class:"hljs-property"},"bottom"),(0,n.Uk)(" - "),(0,n._)("span",{class:"hljs-title class_"},"Cesium"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"compassR"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"top"),(0,n.Uk)(") / "),(0,n._)("span",{class:"hljs-number"},"2"),(0,n.Uk)("\n);\n\n"),(0,n._)("span",{class:"hljs-comment"},"// 鼠标位置到mousedown元素的距离Tx, Ty"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-keyword"},"let"),(0,n.Uk)(" movePosition = "),(0,n._)("span",{class:"hljs-keyword"},"new"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-title class_"},"Cesium"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title class_"},"Cartesian2"),(0,n.Uk)("(\ne."),(0,n._)("span",{class:"hljs-property"},"clientX"),(0,n.Uk)(" - compassR."),(0,n._)("span",{class:"hljs-property"},"left"),(0,n.Uk)(",\ne."),(0,n._)("span",{class:"hljs-property"},"clientY"),(0,n.Uk)(" - compassR."),(0,n._)("span",{class:"hljs-property"},"top"),(0,n.Uk)("\n);\n\n"),(0,n._)("span",{class:"hljs-comment"},"// 计算Tx，Ty与元素中心点的距离"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-keyword"},"let"),(0,n.Uk)(" vector = "),(0,n._)("span",{class:"hljs-title class_"},"Cesium"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"Cartesian2"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"subtract"),(0,n.Uk)("(movePosition, center, "),(0,n._)("span",{class:"hljs-keyword"},"new"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-title class_"},"Cesium"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title class_"},"Cartesian2"),(0,n.Uk)("());\n")])],-1),j=(0,n.uE)('<p>由于<code>subtract是参数1-参数2</code>，得到的<code>vector.x</code>分量是对的，但我们规定y轴上半轴为正轴，而页面是往下为y轴正半轴，所以<code>vector.y</code>实际使用得取相反数。 <img src="https://pic.imgdb.cn/item/6523b3cfc458853aef4d92a3.webp" alt="image.png"></p><h4>计算角度</h4><p>上面我们已经得到向量vector了， 下面我们需要计算出夹角的值了，使用<code>Math.atan2(y,x)</code>方法，可以计算出原点到坐标点的线与x轴正半轴的夹角弧度值。 但实际上，当我们鼠标沿y轴正半轴移动时，计算出来的夹角是90°，我们希望y轴正半轴指向的是正北（0°），逆时针方向为正方向，所以方位角应该是<code>Math.atan2(y,x) - Math.PI / 2</code>。区间<code>[0, 2π]</code>。 计算这个角度的作用是为了扇形的旋转。</p><p><img src="https://pic.imgdb.cn/item/6523b3cfc458853aef4d928e.webp" alt="image.png"></p>',4),u=(0,n._)("pre",null,[(0,n._)("code",{"v-pre":"",class:"language-js"},[(0,n._)("span",{class:"hljs-comment"},"// zeroToTwoPi 返回0~2π区间内的值"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" angle = "),(0,n._)("span",{class:"hljs-title class_"},"Cesium"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"Math"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"zeroToTwoPi"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-title class_"},"Math"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"atan2"),(0,n.Uk)("(-vector."),(0,n._)("span",{class:"hljs-property"},"y"),(0,n.Uk)(", vector."),(0,n._)("span",{class:"hljs-property"},"x"),(0,n.Uk)(") - "),(0,n._)("span",{class:"hljs-title class_"},"Math"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"PI"),(0,n.Uk)(" / "),(0,n._)("span",{class:"hljs-number"},"2"),(0,n.Uk)(");\n")])],-1),m=(0,n._)("h4",null,"计算扇区透明度",-1),b=(0,n._)("p",null,"我们希望鼠标在罗盘中心时，扇区透明度50%，鼠标远离中心，扇区透明度逐渐增加，到达罗盘边缘时透明度为0（不透明）。",-1),d=(0,n._)("pre",null,[(0,n._)("code",{"v-pre":"",class:"language-js"},[(0,n._)("span",{class:"hljs-comment"},"// 计算上面求出来向量vector,利用Cartesian2.magnitude 可以计算出长度"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" distance = "),(0,n._)("span",{class:"hljs-title class_"},"Cesium"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"Cartesian2"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"magnitude"),(0,n.Uk)("(vector);\n"),(0,n._)("span",{class:"hljs-comment"},"// 中心点到罗盘边缘距离，半径"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" maxDistance = compassR."),(0,n._)("span",{class:"hljs-property"},"width"),(0,n.Uk)(";\n"),(0,n._)("span",{class:"hljs-comment"},"// 距离中心点的长度比，最大为1"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" distanceF = "),(0,n._)("span",{class:"hljs-title class_"},"Math"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"min"),(0,n.Uk)("(distance / maxDistance, "),(0,n._)("span",{class:"hljs-number"},"1.0"),(0,n.Uk)(");\n"),(0,n._)("span",{class:"hljs-comment"},"// 使用ease缓动算法 t^2 * 系数 （这里系数0.5，因为扇区默认50%透明度）"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-keyword"},"let"),(0,n.Uk)(" easedOpacity = "),(0,n._)("span",{class:"hljs-number"},"0.5"),(0,n.Uk)(" * distanceF * distanceF + "),(0,n._)("span",{class:"hljs-number"},"0.5"),(0,n.Uk)(";\n")])],-1),g=(0,n._)("h4",null,"让相机移动",-1),y=(0,n._)("p",null,[(0,n.Uk)("前面我们已经计算出"),(0,n._)("code",null,"角度"),(0,n.Uk)("、"),(0,n._)("code",null,"透明度"),(0,n.Uk)("，现在可以利用它们让相机旋转了")],-1),f=(0,n._)("pre",null,[(0,n._)("code",{"v-pre":"",class:"language-js"},[(0,n._)("span",{class:"hljs-comment"},"// 这部分代码是在Cesium的clock的tick时间帧里面执行的，"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-comment"},"// 由于单线程原因，执行的时间间隔不一定是相等的，"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-comment"},"// 所以每次相机每次旋转的幅度应该与时间间隔相关，否则在你旋转的时候，会有停顿感"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" tempstamp = "),(0,n._)("span",{class:"hljs-title function_"},"getTimestamp"),(0,n.Uk)("();\n"),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" deltaT = tempstamp - "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"time"),(0,n.Uk)(";\n"),(0,n._)("span",{class:"hljs-comment"},"// easedOpacity 是通过鼠标距离罗盘中心的长度比算出来的，"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-comment"},"// 所以可以直接用easedOpacity计算得到旋转的速率。 "),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-comment"},"// 2.5 1000 这两个系数可以随便调整，这里参考了cesium-navigation"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" rate = ((easedOpacity - "),(0,n._)("span",{class:"hljs-number"},"0.5"),(0,n.Uk)(") * "),(0,n._)("span",{class:"hljs-number"},"2.5"),(0,n.Uk)(") / "),(0,n._)("span",{class:"hljs-number"},"1000"),(0,n.Uk)(";\n"),(0,n._)("span",{class:"hljs-comment"},"// 计算出移动的距离"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" distance = deltaT * rate;\n\n"),(0,n._)("span",{class:"hljs-comment"},"// 我们要利用这个角度，算出相机是往哪个方向旋转的。"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-comment"},"// 这里要加上90°，是因为上面我们计算这个角度是线与y轴正半轴的夹角，"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-comment"},"// 而Math.sin、Math.cos传入的角度是与x轴正半轴的夹角。"),(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" angle = "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"cursorAngle"),(0,n.Uk)(" + "),(0,n._)("span",{class:"hljs-title class_"},"CesiumMath"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"PI_OVER_TWO"),(0,n.Uk)(";\n"),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" x = "),(0,n._)("span",{class:"hljs-title class_"},"Math"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"cos"),(0,n.Uk)("(angle) * distance;\n"),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" y = "),(0,n._)("span",{class:"hljs-title class_"},"Math"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"sin"),(0,n.Uk)("(angle) * distance;\n"),(0,n._)("span",{class:"hljs-comment"},"// lookAtTransform 设置相机视角朝向哪里"),(0,n.Uk)("\nviewer."),(0,n._)("span",{class:"hljs-property"},"camera"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"lookAtTransform"),(0,n.Uk)("(frame);\nviewer."),(0,n._)("span",{class:"hljs-property"},"camera"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"rotateLeft"),(0,n.Uk)("(x);\nviewer."),(0,n._)("span",{class:"hljs-property"},"camera"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"rotateUp"),(0,n.Uk)("(y);\n"),(0,n._)("span",{class:"hljs-comment"},"// Matrix4.IDENTITY 4x4单位矩阵，设置这个的作用，在上面`鼠标按下事件`部分讲了"),(0,n.Uk)("\nviewer."),(0,n._)("span",{class:"hljs-property"},"camera"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"lookAtTransform"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-title class_"},"Matrix4"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"IDENTITY"),(0,n.Uk)(");\n")])],-1),w=(0,n._)("h2",null,"结尾",-1),v=(0,n._)("p",null,[(0,n.Uk)("到这里，罗盘的功能就完成了， 本文参考了 "),(0,n._)("a",{href:"https://github.com/richard1015/cesium-navigation-es6"},"cesium-navigation-es6"),(0,n.Uk)("， "),(0,n._)("a",{href:"https://github.com/alberto-acevedo/cesium-navigation"},"cesium-navigation"),(0,n.Uk)(" 实际上可以说上面代码的思路都来自于这两位作者，开源万岁！")],-1),x=(0,n._)("h3",null,"完整代码",-1),T=(0,n._)("pre",null,[(0,n._)("code",{"v-pre":"",class:"language-js"},[(0,n.Uk)("<template>\n  "),(0,n._)("span",{class:"language-xml"},[(0,n._)("span",{class:"hljs-tag"},[(0,n.Uk)("<"),(0,n._)("span",{class:"hljs-name"},"div"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-attr"},"class"),(0,n.Uk)("="),(0,n._)("span",{class:"hljs-string"},'"home"'),(0,n.Uk)(">")]),(0,n.Uk)("\n    "),(0,n._)("span",{class:"hljs-tag"},[(0,n.Uk)("<"),(0,n._)("span",{class:"hljs-name"},"Map"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-attr"},"ref"),(0,n.Uk)("="),(0,n._)("span",{class:"hljs-string"},'"map"'),(0,n.Uk)("/>")]),(0,n.Uk)("\n    "),(0,n._)("span",{class:"hljs-tag"},[(0,n.Uk)("<"),(0,n._)("span",{class:"hljs-name"},"div"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-attr"},"class"),(0,n.Uk)("="),(0,n._)("span",{class:"hljs-string"},'"ng"'),(0,n.Uk)(" @"),(0,n._)("span",{class:"hljs-attr"},"mousedown"),(0,n.Uk)("="),(0,n._)("span",{class:"hljs-string"},'"handleMousedown"'),(0,n.Uk)(">")]),(0,n.Uk)("\n      "),(0,n._)("span",{class:"hljs-tag"},[(0,n.Uk)("<"),(0,n._)("span",{class:"hljs-name"},"div"),(0,n.Uk)("\n        "),(0,n._)("span",{class:"hljs-attr"},"class"),(0,n.Uk)("="),(0,n._)("span",{class:"hljs-string"},'"shan"'),(0,n.Uk)("\n        "),(0,n._)("span",{class:"hljs-attr"},":style"),(0,n.Uk)("="),(0,n._)("span",{class:"hljs-string"},'"{\n          opacity: easedOpacity,\n          transform: `rotate(${-cursorAngle + Math.PI / 4}rad)`,\n        }"'),(0,n.Uk)("\n      >")]),(0,n._)("span",{class:"hljs-tag"},[(0,n.Uk)("</"),(0,n._)("span",{class:"hljs-name"},"div"),(0,n.Uk)(">")]),(0,n.Uk)("\n      "),(0,n._)("span",{class:"hljs-tag"},[(0,n.Uk)("<"),(0,n._)("span",{class:"hljs-name"},"div"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-attr"},"class"),(0,n.Uk)("="),(0,n._)("span",{class:"hljs-string"},'"ng-box"'),(0,n.Uk)(">")]),(0,n._)("span",{class:"hljs-tag"},[(0,n.Uk)("</"),(0,n._)("span",{class:"hljs-name"},"div"),(0,n.Uk)(">")]),(0,n.Uk)("\n    "),(0,n._)("span",{class:"hljs-tag"},[(0,n.Uk)("</"),(0,n._)("span",{class:"hljs-name"},"div"),(0,n.Uk)(">")]),(0,n.Uk)("\n  "),(0,n._)("span",{class:"hljs-tag"},[(0,n.Uk)("</"),(0,n._)("span",{class:"hljs-name"},"div"),(0,n.Uk)(">")])]),(0,n.Uk)("\n</template>\n\n"),(0,n._)("span",{class:"language-xml"},[(0,n._)("span",{class:"hljs-tag"},[(0,n.Uk)("<"),(0,n._)("span",{class:"hljs-name"},"script"),(0,n.Uk)(">")]),(0,n._)("span",{class:"language-javascript"},[(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-keyword"},"import"),(0,n.Uk)(" {\n  "),(0,n._)("span",{class:"hljs-title class_"},"Cartographic"),(0,n.Uk)(",\n  "),(0,n._)("span",{class:"hljs-title class_"},"Cartesian3"),(0,n.Uk)(",\n  "),(0,n._)("span",{class:"hljs-title class_"},"Matrix4"),(0,n.Uk)(",\n  "),(0,n._)("span",{class:"hljs-title class_"},"Cartesian2"),(0,n.Uk)(",\n  "),(0,n._)("span",{class:"hljs-title class_"},"Math"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-keyword"},"as"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-title class_"},"CesiumMath"),(0,n.Uk)(",\n  "),(0,n._)("span",{class:"hljs-title class_"},"Transforms"),(0,n.Uk)(",\n  getTimestamp,\n  "),(0,n._)("span",{class:"hljs-title class_"},"Ray"),(0,n.Uk)(",\n} "),(0,n._)("span",{class:"hljs-keyword"},"from"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-string"},"'cesium/Build/Cesium/Cesium'"),(0,n.Uk)(";\n"),(0,n._)("span",{class:"hljs-keyword"},"import"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-title class_"},"Map"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-keyword"},"from"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-string"},"'@/components/Map.vue'"),(0,n.Uk)(";\n"),(0,n._)("span",{class:"hljs-keyword"},"export"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-keyword"},"default"),(0,n.Uk)(" {\n  "),(0,n._)("span",{class:"hljs-attr"},"components"),(0,n.Uk)(": {\n    "),(0,n._)("span",{class:"hljs-title class_"},"Map"),(0,n.Uk)(",\n  },\n  "),(0,n._)("span",{class:"hljs-title function_"},"data"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-params"}),(0,n.Uk)(") {\n    "),(0,n._)("span",{class:"hljs-keyword"},"return"),(0,n.Uk)(" {\n      "),(0,n._)("span",{class:"hljs-attr"},"vector2"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-literal"},"undefined"),(0,n.Uk)(",\n      "),(0,n._)("span",{class:"hljs-attr"},"cursorAngle"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"0"),(0,n.Uk)(",\n      "),(0,n._)("span",{class:"hljs-attr"},"easedOpacity"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"0"),(0,n.Uk)(",\n    };\n  },\n  "),(0,n._)("span",{class:"hljs-title function_"},"created"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-params"}),(0,n.Uk)(") {\n    "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"time"),(0,n.Uk)(" = "),(0,n._)("span",{class:"hljs-literal"},"undefined"),(0,n.Uk)(";\n    "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"frame"),(0,n.Uk)(" = "),(0,n._)("span",{class:"hljs-literal"},"undefined"),(0,n.Uk)(";\n    "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"dom"),(0,n.Uk)(" = "),(0,n._)("span",{class:"hljs-literal"},"undefined"),(0,n.Uk)(";\n  },\n  "),(0,n._)("span",{class:"hljs-attr"},"methods"),(0,n.Uk)(": {\n    "),(0,n._)("span",{class:"hljs-title function_"},"handleMousedown"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-params"},"e"),(0,n.Uk)(") {\n      "),(0,n._)("span",{class:"hljs-keyword"},"let"),(0,n.Uk)(" result = "),(0,n._)("span",{class:"hljs-keyword"},"new"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-title class_"},"Cartesian3"),(0,n.Uk)("();\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" { camera, scene } = "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"$refs"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"map"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"viewer"),(0,n.Uk)(";\n      "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"dom"),(0,n.Uk)(" = e."),(0,n._)("span",{class:"hljs-property"},"target"),(0,n.Uk)(";\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" rayScratch = "),(0,n._)("span",{class:"hljs-keyword"},"new"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-title class_"},"Ray"),(0,n.Uk)("();\n      rayScratch."),(0,n._)("span",{class:"hljs-property"},"origin"),(0,n.Uk)(" = camera."),(0,n._)("span",{class:"hljs-property"},"positionWC"),(0,n.Uk)(";\n      rayScratch."),(0,n._)("span",{class:"hljs-property"},"direction"),(0,n.Uk)(" = camera."),(0,n._)("span",{class:"hljs-property"},"directionWC"),(0,n.Uk)(";\n      result = scene."),(0,n._)("span",{class:"hljs-property"},"globe"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"pick"),(0,n.Uk)("(rayScratch, scene, result);\n      result = camera."),(0,n._)("span",{class:"hljs-title function_"},"worldToCameraCoordinatesPoint"),(0,n.Uk)("(result, result);\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" newTransformScratch = "),(0,n._)("span",{class:"hljs-keyword"},"new"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-title class_"},"Matrix4"),(0,n.Uk)("();\n      "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"frame"),(0,n.Uk)(" = "),(0,n._)("span",{class:"hljs-title class_"},"Transforms"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"eastNorthUpToFixedFrame"),(0,n.Uk)("(\n        result,\n        scene."),(0,n._)("span",{class:"hljs-property"},"globe"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"ellipsoid"),(0,n.Uk)(",\n        newTransformScratch\n      );\n      "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"time"),(0,n.Uk)(" = "),(0,n._)("span",{class:"hljs-title function_"},"getTimestamp"),(0,n.Uk)("();\n      "),(0,n._)("span",{class:"hljs-variable language_"},"document"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"addEventListener"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-string"},"'mousemove'"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"mousemoveHandler"),(0,n.Uk)(");\n      "),(0,n._)("span",{class:"hljs-variable language_"},"document"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"addEventListener"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-string"},"'mouseup'"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"mouseupHandler"),(0,n.Uk)(");\n      "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"$refs"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"map"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"viewer"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"clock"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"onTick"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"addEventListener"),(0,n.Uk)("(\n        "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"orbitTickFunction"),(0,n.Uk)("\n      );\n    },\n    "),(0,n._)("span",{class:"hljs-title function_"},"mouseupHandler"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-params"}),(0,n.Uk)(") {\n      "),(0,n._)("span",{class:"hljs-variable language_"},"document"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"removeEventListener"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-string"},"'mousemove'"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"mousemoveHandler"),(0,n.Uk)(");\n      "),(0,n._)("span",{class:"hljs-variable language_"},"document"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"removeEventListener"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-string"},"'mouseup'"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"mouseupHandler"),(0,n.Uk)(");\n      "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"$refs"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"map"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"viewer"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"clock"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"onTick"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"removeEventListener"),(0,n.Uk)("(\n        "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"orbitTickFunction"),(0,n.Uk)("\n      );\n      "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"easedOpacity"),(0,n.Uk)(" = "),(0,n._)("span",{class:"hljs-number"},"0"),(0,n.Uk)(";\n    },\n    "),(0,n._)("span",{class:"hljs-title function_"},"mousemoveHandler"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-params"},"e"),(0,n.Uk)(") {\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" rect = "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"dom"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"getBoundingClientRect"),(0,n.Uk)("();\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" center = "),(0,n._)("span",{class:"hljs-keyword"},"new"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-title class_"},"Cartesian2"),(0,n.Uk)("(\n        (rect."),(0,n._)("span",{class:"hljs-property"},"right"),(0,n.Uk)(" - rect."),(0,n._)("span",{class:"hljs-property"},"left"),(0,n.Uk)(") / "),(0,n._)("span",{class:"hljs-number"},"2"),(0,n.Uk)(",\n        (rect."),(0,n._)("span",{class:"hljs-property"},"bottom"),(0,n.Uk)(" - rect."),(0,n._)("span",{class:"hljs-property"},"top"),(0,n.Uk)(") / "),(0,n._)("span",{class:"hljs-number"},"2"),(0,n.Uk)("\n      );\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" movePosition = "),(0,n._)("span",{class:"hljs-keyword"},"new"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-title class_"},"Cartesian2"),(0,n.Uk)("(\n        e."),(0,n._)("span",{class:"hljs-property"},"clientX"),(0,n.Uk)(" - rect."),(0,n._)("span",{class:"hljs-property"},"left"),(0,n.Uk)(",\n        e."),(0,n._)("span",{class:"hljs-property"},"clientY"),(0,n.Uk)(" - rect."),(0,n._)("span",{class:"hljs-property"},"top"),(0,n.Uk)("\n      );\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" vector2 = "),(0,n._)("span",{class:"hljs-title class_"},"Cartesian2"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"subtract"),(0,n.Uk)("(\n        movePosition,\n        center,\n        "),(0,n._)("span",{class:"hljs-keyword"},"new"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-title class_"},"Cartesian2"),(0,n.Uk)("()\n      );\n      "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"computeAngleAndOpacity"),(0,n.Uk)("(vector2, rect."),(0,n._)("span",{class:"hljs-property"},"width"),(0,n.Uk)(");\n    },\n    "),(0,n._)("span",{class:"hljs-title function_"},"computeAngleAndOpacity"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-params"},"vector2, domWidth"),(0,n.Uk)(") {\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" angle = "),(0,n._)("span",{class:"hljs-title class_"},"Math"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"atan2"),(0,n.Uk)("(-vector2."),(0,n._)("span",{class:"hljs-property"},"y"),(0,n.Uk)(", vector2."),(0,n._)("span",{class:"hljs-property"},"x"),(0,n.Uk)(");\n      "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"cursorAngle"),(0,n.Uk)(" = "),(0,n._)("span",{class:"hljs-title class_"},"CesiumMath"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"zeroToTwoPi"),(0,n.Uk)("(angle - "),(0,n._)("span",{class:"hljs-title class_"},"CesiumMath"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"PI_OVER_TWO"),(0,n.Uk)(");\n\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" distance = "),(0,n._)("span",{class:"hljs-title class_"},"Cartesian2"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"magnitude"),(0,n.Uk)("(vector2);\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" maxDistance = domWidth / "),(0,n._)("span",{class:"hljs-number"},"2"),(0,n.Uk)(";\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" distanceF = "),(0,n._)("span",{class:"hljs-title class_"},"Math"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"min"),(0,n.Uk)("(distance / maxDistance, "),(0,n._)("span",{class:"hljs-number"},"1.0"),(0,n.Uk)(");\n      "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"easedOpacity"),(0,n.Uk)(" = "),(0,n._)("span",{class:"hljs-number"},"0.5"),(0,n.Uk)(" * distanceF * distanceF + "),(0,n._)("span",{class:"hljs-number"},"0.5"),(0,n.Uk)(";\n    },\n    "),(0,n._)("span",{class:"hljs-title function_"},"orbitTickFunction"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-params"}),(0,n.Uk)(") {\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" tempstamp = "),(0,n._)("span",{class:"hljs-title function_"},"getTimestamp"),(0,n.Uk)("();\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" deltaT = tempstamp - "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"time"),(0,n.Uk)(";\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" rate = (("),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"easedOpacity"),(0,n.Uk)(" - "),(0,n._)("span",{class:"hljs-number"},"0.5"),(0,n.Uk)(") * "),(0,n._)("span",{class:"hljs-number"},"2.5"),(0,n.Uk)(") / "),(0,n._)("span",{class:"hljs-number"},"1000"),(0,n.Uk)(";\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" distance = deltaT * rate;\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" angle = "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"cursorAngle"),(0,n.Uk)(" + "),(0,n._)("span",{class:"hljs-title class_"},"CesiumMath"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"PI_OVER_TWO"),(0,n.Uk)(";\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" x = "),(0,n._)("span",{class:"hljs-title class_"},"Math"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"cos"),(0,n.Uk)("(angle) * distance;\n      "),(0,n._)("span",{class:"hljs-keyword"},"const"),(0,n.Uk)(" y = "),(0,n._)("span",{class:"hljs-title class_"},"Math"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"sin"),(0,n.Uk)("(angle) * distance;\n      "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"$refs"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"map"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"viewer"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"camera"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"lookAtTransform"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"frame"),(0,n.Uk)(");\n      "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"$refs"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"map"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"viewer"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"camera"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"rotateLeft"),(0,n.Uk)("(x);\n      "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"$refs"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"map"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"viewer"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"camera"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"rotateUp"),(0,n.Uk)("(y);\n      "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"$refs"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"map"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"viewer"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"camera"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-title function_"},"lookAtTransform"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-title class_"},"Matrix4"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"IDENTITY"),(0,n.Uk)(");\n      "),(0,n._)("span",{class:"hljs-variable language_"},"this"),(0,n.Uk)("."),(0,n._)("span",{class:"hljs-property"},"time"),(0,n.Uk)(" = tempstamp;\n    },\n  },\n};\n")]),(0,n._)("span",{class:"hljs-tag"},[(0,n.Uk)("</"),(0,n._)("span",{class:"hljs-name"},"script"),(0,n.Uk)(">")])]),(0,n.Uk)("\n\n"),(0,n._)("span",{class:"language-xml"},[(0,n._)("span",{class:"hljs-tag"},[(0,n.Uk)("<"),(0,n._)("span",{class:"hljs-name"},"style"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-attr"},"lang"),(0,n.Uk)("="),(0,n._)("span",{class:"hljs-string"},'"scss"'),(0,n.Uk)(),(0,n._)("span",{class:"hljs-attr"},"scoped"),(0,n.Uk)(">")]),(0,n._)("span",{class:"language-css"},[(0,n.Uk)("\n"),(0,n._)("span",{class:"hljs-selector-class"},".home"),(0,n.Uk)(" {\n  "),(0,n._)("span",{class:"hljs-attribute"},"width"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"100%"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"height"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"100%"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"position"),(0,n.Uk)(": relative;\n}\n"),(0,n._)("span",{class:"hljs-selector-class"},".option"),(0,n.Uk)(" {\n  "),(0,n._)("span",{class:"hljs-attribute"},"position"),(0,n.Uk)(": absolute;\n  "),(0,n._)("span",{class:"hljs-attribute"},"top"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"40px"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"left"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"40px"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-selector-class"},".switch"),(0,n.Uk)(" {\n    "),(0,n._)("span",{class:"hljs-attribute"},"border"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"1px"),(0,n.Uk)(" solid;\n    "),(0,n._)("span",{class:"hljs-attribute"},"background-color"),(0,n.Uk)(": transparent;\n    "),(0,n._)("span",{class:"hljs-attribute"},"text-transform"),(0,n.Uk)(": uppercase;\n    "),(0,n._)("span",{class:"hljs-attribute"},"font-size"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"14px"),(0,n.Uk)(";\n    "),(0,n._)("span",{class:"hljs-attribute"},"padding"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"40px"),(0,n.Uk)(";\n    "),(0,n._)("span",{class:"hljs-attribute"},"font-weight"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"300"),(0,n.Uk)(";\n    "),(0,n._)("span",{class:"hljs-attribute"},"cursor"),(0,n.Uk)(": pointer;\n    "),(0,n._)("span",{class:"hljs-attribute"},"border-radius"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"4px"),(0,n.Uk)(";\n  }\n  "),(0,n._)("span",{class:"hljs-selector-class"},".open"),(0,n.Uk)(" {\n    "),(0,n._)("span",{class:"hljs-attribute"},"background-color"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"#4cc9f0"),(0,n.Uk)(";\n    "),(0,n._)("span",{class:"hljs-attribute"},"color"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"#fff"),(0,n.Uk)(";\n    -webkit-"),(0,n._)("span",{class:"hljs-attribute"},"box-shadow"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"99px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"6px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-built_in"},"rgba"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-number"},"76"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"201"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"240"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"1"),(0,n.Uk)(");\n    -moz-"),(0,n._)("span",{class:"hljs-attribute"},"box-shadow"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"99px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"6px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-built_in"},"rgba"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-number"},"76"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"201"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"240"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"1"),(0,n.Uk)(");\n    "),(0,n._)("span",{class:"hljs-attribute"},"box-shadow"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"99px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"6px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-built_in"},"rgba"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-number"},"76"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"201"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"240"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"1"),(0,n.Uk)(");\n    &"),(0,n._)("span",{class:"hljs-selector-pseudo"},":hover"),(0,n.Uk)(" {\n      "),(0,n._)("span",{class:"hljs-attribute"},"background-color"),(0,n.Uk)(": unset;\n      "),(0,n._)("span",{class:"hljs-attribute"},"color"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"#4cc9f0"),(0,n.Uk)(";\n      -webkit-"),(0,n._)("span",{class:"hljs-attribute"},"box-shadow"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"99px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"6px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-built_in"},"rgb"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-number"},"21"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"22"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"22"),(0,n.Uk)(");\n      -moz-"),(0,n._)("span",{class:"hljs-attribute"},"box-shadow"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"99px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"6px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-built_in"},"rgb"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-number"},"21"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"22"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"22"),(0,n.Uk)(");\n      "),(0,n._)("span",{class:"hljs-attribute"},"box-shadow"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"99px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"6px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-built_in"},"rgb"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-number"},"21"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"22"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"22"),(0,n.Uk)(");\n    }\n  }\n  "),(0,n._)("span",{class:"hljs-selector-class"},".close"),(0,n.Uk)(" {\n    "),(0,n._)("span",{class:"hljs-attribute"},"color"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"#4cc9f0"),(0,n.Uk)(";\n    &"),(0,n._)("span",{class:"hljs-selector-pseudo"},":hover"),(0,n.Uk)(" {\n      "),(0,n._)("span",{class:"hljs-attribute"},"background-color"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"#4cc9f0"),(0,n.Uk)(";\n      "),(0,n._)("span",{class:"hljs-attribute"},"color"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"#fff"),(0,n.Uk)(";\n      -webkit-"),(0,n._)("span",{class:"hljs-attribute"},"box-shadow"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"99px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"6px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-built_in"},"rgba"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-number"},"76"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"201"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"240"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"1"),(0,n.Uk)(");\n      -moz-"),(0,n._)("span",{class:"hljs-attribute"},"box-shadow"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"99px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"6px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-built_in"},"rgba"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-number"},"76"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"201"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"240"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"1"),(0,n.Uk)(");\n      "),(0,n._)("span",{class:"hljs-attribute"},"box-shadow"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"99px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"6px"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-built_in"},"rgba"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-number"},"76"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"201"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"240"),(0,n.Uk)(", "),(0,n._)("span",{class:"hljs-number"},"1"),(0,n.Uk)(");\n    }\n  }\n}\n"),(0,n._)("span",{class:"hljs-selector-class"},".label"),(0,n.Uk)(" {\n  "),(0,n._)("span",{class:"hljs-attribute"},"position"),(0,n.Uk)(": absolute;\n  "),(0,n._)("span",{class:"hljs-attribute"},"left"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"0"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"right"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"0"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"top"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"0"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"margin"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"20px"),(0,n.Uk)(" auto "),(0,n._)("span",{class:"hljs-number"},"0"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"font-size"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"24px"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"color"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"#fff"),(0,n.Uk)(";\n}\n"),(0,n._)("span",{class:"hljs-selector-class"},".change-mode-btn"),(0,n.Uk)(" {\n  "),(0,n._)("span",{class:"hljs-attribute"},"position"),(0,n.Uk)(": absolute;\n  "),(0,n._)("span",{class:"hljs-attribute"},"right"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"top"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"10px"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"width"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"150px"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"height"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"40px"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"display"),(0,n.Uk)(": flex;\n  "),(0,n._)("span",{class:"hljs-attribute"},"justify-content"),(0,n.Uk)(": center;\n  "),(0,n._)("span",{class:"hljs-attribute"},"align-items"),(0,n.Uk)(": center;\n  "),(0,n._)("span",{class:"hljs-attribute"},"border-radius"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"4px"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"border"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"1px"),(0,n.Uk)(" solid "),(0,n._)("span",{class:"hljs-number"},"#fff"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"color"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"#fff"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"background-color"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"#26354a"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"cursor"),(0,n.Uk)(": pointer;\n}\n"),(0,n._)("span",{class:"hljs-selector-class"},".ng"),(0,n.Uk)(" {\n  "),(0,n._)("span",{class:"hljs-attribute"},"position"),(0,n.Uk)(": absolute;\n  "),(0,n._)("span",{class:"hljs-attribute"},"bottom"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"30px"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"right"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"30px"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"width"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"200px"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-attribute"},"height"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"200px"),(0,n.Uk)(";\n  "),(0,n._)("span",{class:"hljs-selector-class"},".ng-box"),(0,n.Uk)(" {\n    "),(0,n._)("span",{class:"hljs-attribute"},"position"),(0,n.Uk)(": absolute;\n    "),(0,n._)("span",{class:"hljs-attribute"},"width"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"100%"),(0,n.Uk)(";\n    "),(0,n._)("span",{class:"hljs-attribute"},"height"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"100%"),(0,n.Uk)(";\n    "),(0,n._)("span",{class:"hljs-attribute"},"background-image"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-built_in"},"url"),(0,n.Uk)("("),(0,n._)("span",{class:"hljs-string"},"'~@/assets/image/ng.png'"),(0,n.Uk)(");\n    "),(0,n._)("span",{class:"hljs-attribute"},"background-size"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"100%"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"100%"),(0,n.Uk)(";\n    "),(0,n._)("span",{class:"hljs-attribute"},"pointer-events"),(0,n.Uk)(": none;\n  }\n  "),(0,n._)("span",{class:"hljs-selector-class"},".shan"),(0,n.Uk)(" {\n    "),(0,n._)("span",{class:"hljs-attribute"},"position"),(0,n.Uk)(": absolute;\n    "),(0,n._)("span",{class:"hljs-attribute"},"width"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"35%"),(0,n.Uk)(";\n    "),(0,n._)("span",{class:"hljs-attribute"},"height"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"35%"),(0,n.Uk)(";\n    "),(0,n._)("span",{class:"hljs-attribute"},"right"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"50%"),(0,n.Uk)(";\n    "),(0,n._)("span",{class:"hljs-attribute"},"bottom"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"50%"),(0,n.Uk)(";\n    "),(0,n._)("span",{class:"hljs-attribute"},"transform-origin"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"100%"),(0,n.Uk)(),(0,n._)("span",{class:"hljs-number"},"100%"),(0,n.Uk)(";\n    "),(0,n._)("span",{class:"hljs-attribute"},"border-top-left-radius"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"70%"),(0,n.Uk)(";\n    "),(0,n._)("span",{class:"hljs-attribute"},"background-color"),(0,n.Uk)(": "),(0,n._)("span",{class:"hljs-number"},"#4cc9f0"),(0,n.Uk)(";\n    "),(0,n._)("span",{class:"hljs-attribute"},"pointer-events"),(0,n.Uk)(": none;\n  }\n}\n")]),(0,n._)("span",{class:"hljs-tag"},[(0,n.Uk)("</"),(0,n._)("span",{class:"hljs-name"},"style"),(0,n.Uk)(">")])]),(0,n.Uk)("\n\n")])],-1),C=[t,c,p,r,_,h,k,o,i,U,j,u,m,b,d,g,y,f,w,v,x,T];function M(s,a,l,e,t,c){return(0,n.wg)(),(0,n.iD)("section",null,C)}var E={components:{}},O=l(1492);const F=(0,O.Z)(E,[["render",M]]);var R=F}}]);
//# sourceMappingURL=942.3b0c1e8f.js.map